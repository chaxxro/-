# 消息队列

## 消息队列需要满足的特性

- 消息有序性：消息是异步处理的，但是消费者需要按照生产者发送消息的顺序来消费，避免出现后发送的消息被先处理的情况

- 重复消息处理：生产者可能因为网络问题出现消息重传导致消费者可能会收到多条重复消息，同样的消息重复多次的话可能会造成一业务逻辑多次执行，需要确保如何避免重复消费问题

- 可靠性：如果发送消息时接收者不可用，消息队列会保留消息，直到成功地传递它。

  当消费者重启后，可以继续读取消息进行处理，防止消息遗漏

## List 实现消息队列

List 可以按照元素被推入列表中的顺序来存储元素，能满足先进先出的需求

1. 使用 `lpush` 将信息插入到队列头部
2. 使用 `rpop` 从尾部弹出数据
3. `BLPOP`、`BRPOP` 阻塞读取的命令，当 List 没有数据时将自动阻塞消费者，直到有新的消息写入队列，消费者才能从 List 中读取新消息执行业务逻辑
4. 

